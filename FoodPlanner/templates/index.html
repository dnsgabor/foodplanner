{% extends "base.html" %}

{% block content %}
<h1>Recipes</h1>

<!-- Add recipe button -->
<a href="{{ url_for('add_recipe') }}" style="display:inline-block; margin-bottom:1em; background-color:#2aa198; color:white; padding:0.5em 1em; border-radius:4px; text-decoration:none;">Add New Recipe</a>

<!-- Filter form -->
<form method="get" action="{{ url_for('index') }}">
    <label>Filter by attributes and max time (use &lt;45min for time):</label>
    <input type="text" name="filters" placeholder="e.g., dessert, easy, <45min" value="{{ request.args.get('filters', '') }}" autocomplete="off">
    
    <!-- Datalist for autocomplete -->
    <datalist id="attr-suggestions">
        {% for attr in all_attrs %}
            <option value="{{ attr }}"></option>
        {% endfor %}
    </datalist>
    
    <button type="submit">Filter</button>
    <a href="{{ url_for('index') }}" style="margin-left:1em;">Clear Filters</a>
</form>

<ul>
{% for recipe in recipes %}
    <li>
        <a href="{{ url_for('view_recipe', recipe_id=recipe.id) }}">{{ recipe.title }}</a>
        {% if recipe.attributes %}
            ({{ recipe.attributes | join(', ') }})
        {% endif %}
        {% if recipe.time %}
            ~ {{ recipe.time }}
        {% endif %}
    </li>
{% else %}
    <li>No recipes match the filter criteria</li>
{% endfor %}
</ul>
{% endblock %}
